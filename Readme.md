## é¡¹ç›®ç®€ä»‹

> [!IMPORTANT]
>
> Respect `xyhelper` ,Respect `ninja` , Respect `Wizerd`ï¼

æ„Ÿè°¢ninjaå’ŒWizerdçš„ä»˜å‡ºï¼Œæ•¬ç¤¼ï¼ï¼ï¼

æœ¬é¡¹ç›®æ”¯æŒï¼š

1. å°† xyhelper  `proxy` æ¨¡å¼ä¸‹çš„ `backend-apiå…è´¹æ¥å£` è½¬ä¸º `/v1/chat/completions` æ¥å£ï¼Œæ”¯æŒæµå¼å’Œéæµå¼å“åº”ã€‚

2. å°† xyhelper  `proxy` æ¨¡å¼ä¸‹çš„ `backend-apiå…è´¹æ¥å£` è½¬ä¸º `/v1/images/generations` æ¥å£

3. æ”¯æŒç›´æ¥æŠŠrefresh_tokenä½œä¸ºè¯·æ±‚keyï¼Œæ–¹ä¾¿æ¥å…¥one_api

4. æ”¯æŒ gpt-4-mobile ã€gpt-4-s ã€åŸºæœ¬æ‰€æœ‰çš„GPTS

* **xyhelper çš„ å…è´¹ backend-api æ¥å£ï¼Œæ— éœ€æ‰“ç **

* **xyhelperæ¥å£æ¯åˆ†é’Ÿæœ€å¤šè¯·æ±‚30æ¬¡ï¼Œä»‹æ„è¯·ç»•è¡Œ**
    * æˆ‘æ˜¯å¼€å‘è€…,æˆ‘æƒ³è‡ªè¡Œä¿®æ”¹åŠŸèƒ½->å‰å¾€æºç åº“ https://github.com/xyhelper/chatgpt-mirror-server
    * æˆ‘æ²¡æœåŠ¡å™¨,ä¹Ÿæ²¡æœ‰å®˜ç½‘è´¦å·,åªæƒ³ä½¿ç”¨->å‰å¾€å®˜ç½‘è´­ä¹°æˆ‘ä»¬è¿è¥çš„ä¼šå‘˜æœåŠ¡ https://www.xyhelper.com.cn
    * æˆ‘æƒ³åšå•†ä¸šç”¨é€”,æˆ‘æƒ³è‡ªå·±è¿è¥->è€æ¿é‡Œé¢è¯· https://www.xyhelper.com.cn/access
    * æˆ‘æœ‰æœåŠ¡å™¨,æˆ‘æƒ³è‡ªå·±éƒ¨ç½²->è¯·ç»§ç»­é˜…è¯»æœ¬æ–‡æ¡£(æœ‰æ¡ä»¶çš„è¯ç»™ä¸ªstarå§)

å¦‚æœæœ¬é¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œè¯·ç‚¹ä¸ªå°æ˜Ÿæ˜Ÿå§~

å¦‚æœæœ‰ä»€ä¹ˆåœ¨é¡¹ç›®çš„ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ç–‘æƒ‘æˆ–éœ€æ±‚ï¼Œæ¬¢è¿åŠ å…¥ Community Telegram Channel: [Inker çš„é­”æ³•ä¸–ç•Œ](https://t.me/InkerWorld) æ¥å’Œå¤§å®¶ä¸€èµ·äº¤æµä¸€ä¸‹~

## æ›´æ–°æ—¥å¿—

è§ `Release` é¡µé¢ã€‚

## åŠŸèƒ½åˆ—è¡¨

- [x] æ”¯æŒ ä»£ç è§£é‡Šå™¨ã€è”ç½‘ã€ç»˜å›¾

- [x] æ”¯æŒ gpt-4-s

- [x] æ”¯æŒ gpt-4-mobile

- [x] æ”¯æŒ gpt-3.5-turbo

- [x] æ”¯æŒ gpts

- [x] æ”¯æŒ æµå¼è¾“å‡º

- [x] æ”¯æŒ éæµå¼è¾“å‡º

- [x] æ”¯æŒ dalle ç»˜å›¾æ¥å£

- [x] æ”¯æŒ æ¥å£ä¿æ´»

- [x] æ”¯æŒ è‡ªå®šä¹‰æ¥å£å‰ç¼€

- [x] æ”¯æŒ æ—¥å¿—ç­‰çº§åˆ’åˆ†

- [x] æ”¯æŒ gpt-4-vision

- [x] æ”¯æŒ Botæ¨¡å¼ï¼ˆQQã€å¾®ä¿¡æœºå™¨äººç­‰å»ºè®®å¼€å¯ï¼Œç½‘é¡µåº”ç”¨è¯·ä¸è¦å¼€å¯ï¼‰

- [x] æ”¯æŒ æŒ‡å®šè¿›ç¨‹ã€çº¿ç¨‹æ•°

- [x] æ”¯æŒæ–‡ä»¶ç”Ÿæˆ

## æ³¨æ„

> [!CAUTION]
> 1. æœ¬é¡¹ç›®çš„è¿è¡Œéœ€è¦ xyhelper çš„å…è´¹æ¥å£
>
> 2. æœ¬é¡¹ç›®å®é™…ä¸ºå°†æ¥è‡ª `/v1/chat/completions` çš„è¯·æ±‚è½¬å‘åˆ°ninjaçš„ `/backend-api/conversation` æ¥å£ï¼Œå› æ­¤æœ¬é¡¹ç›®å¹¶ä¸æ”¯æŒé«˜å¹¶å‘æ“ä½œï¼Œè¯·ä¸è¦æ¥å…¥å¦‚ `æ²‰æµ¸å¼ç¿»è¯‘` ç­‰é«˜å¹¶å‘é¡¹ç›®ã€‚
>
> 3. æœ¬é¡¹ç›®æ”¯æŒä½¿ç”¨appleå¹³å°çš„refresh_tokenä½œä¸ºè¯·æ±‚key. 
>
> 4. æœ¬é¡¹ç›®å¹¶ä¸èƒ½ç»•è¿‡ OpenAI å’Œ xyhelper å®˜æ–¹çš„é™åˆ¶ï¼Œåªæä¾›ä¾¿åˆ©ï¼Œä¸æä¾›ç»•è¿‡ã€‚
>
> 5. æé—®çš„è‰ºæœ¯ï¼šå½“å‡ºç°é¡¹ç›®ä¸èƒ½æ­£å¸¸è¿è¡Œæ—¶ï¼Œè¯·æºå¸¦ `DEBUG` çº§åˆ«çš„æ—¥å¿—åœ¨ `Issue` æˆ–è€…ç¤¾åŒºç¾¤å†…æé—®ï¼Œå¦åˆ™å°†å¼€å¯ç®—å‘½æ¨¡å¼~

## æ”¯æŒçš„æ¨¡å‹

ç›®å‰æ”¯æŒçš„æ¨¡å‹åŒ…æ‹¬ï¼š

1. gpt-4-sï¼šæ”¯æŒä»£ç è§£é‡Šå™¨ã€bingè”ç½‘ã€dalleç»˜å›¾çš„ GPT-4ï¼Œå¯¹åº”çš„æ˜¯å®˜æ–¹çš„é»˜è®¤ GPT-4ï¼ˆç»˜å›¾çš„å“åº”æœ‰æ—¶å€™æœ‰äº›ä¸ç¨³å®šï¼‰

2. gpt-4-mobileï¼šæ”¯æŒä»£ç è§£é‡Šå™¨ã€bingè”ç½‘ã€dalleç»˜å›¾çš„ GPT-4ï¼Œå¯¹åº”çš„æ˜¯å®˜æ–¹çš„æ‰‹æœºç‰ˆ GPT-4ï¼Œæˆªæ­¢è‡³2023å¹´12æœˆ15æ—¥ï¼Œæœ¬æ¨¡å‹ä½¿ç”¨é‡ä¸è®¡å…¥ GPT-4 ç”¨é‡ï¼ˆå³ä¸å—æ¯ 3 å°æ—¶ 40 æ¬¡çš„é™åˆ¶ï¼‰

3. å‡ ä¹æ‰€æœ‰çš„ GPTSï¼ˆé…ç½®æ–¹å¼è§ä¸‹æ–‡ï¼‰

4. gpt-3.5-turbo

## Docker-Compose éƒ¨ç½²

ä»“åº“å†…å·²åŒ…å«ç›¸å…³æ–‡ä»¶å’Œç›®å½•ï¼Œæ‹‰åˆ°æœ¬åœ°åä¿®æ”¹ docker-compose.yml æ–‡ä»¶é‡Œçš„ç¯å¢ƒå˜é‡åè¿è¡Œ`docker-compose up -d`å³å¯ã€‚

## config.json å˜é‡è¯´æ˜ï¼š

- `log_level`: ç”¨äºè®¾ç½®æ—¥å¿—ç­‰çº§ï¼Œå¯é€‰å€¼ä¸ºï¼š`DEBUG`ã€`INFO`ã€`WARNING`ã€`ERROR`ï¼Œé»˜è®¤ä¸º `DEBUG`

- `need_log_to_file`: ç”¨äºè®¾ç½®æ˜¯å¦éœ€è¦å°†æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œå¯é€‰å€¼ä¸ºï¼š`true`ã€`false`ï¼Œé»˜è®¤ä¸º `true`ï¼Œæ—¥å¿—æ–‡ä»¶è·¯å¾„ä¸ºï¼š`./log/access.log`ï¼Œé»˜è®¤æ¯å¤©ä¼šè‡ªåŠ¨åˆ†å‰²æ—¥å¿—æ–‡ä»¶ã€‚

- `process_workers`: ç”¨äºè®¾ç½®è¿›ç¨‹æ•°ï¼Œå¦‚æœä¸éœ€è¦è®¾ç½®ï¼Œå¯ä»¥ä¿æŒä¸å˜ï¼Œå¦‚æœéœ€è¦è®¾ç½®ï¼Œå¯ä»¥è®¾ç½®ä¸ºéœ€è¦è®¾ç½®çš„å€¼ï¼Œå¦‚æœè®¾ç½®ä¸º `1`ï¼Œåˆ™ä¼šå¼ºåˆ¶è®¾ç½®ä¸ºå•è¿›ç¨‹æ¨¡å¼ã€‚

- `process_threads`: ç”¨äºè®¾ç½®çº¿ç¨‹æ•°ï¼Œå¦‚æœä¸éœ€è¦è®¾ç½®ï¼Œå¯ä»¥ä¿æŒä¸å˜ï¼Œå¦‚æœéœ€è¦è®¾ç½®ï¼Œå¯ä»¥è®¾ç½®ä¸ºéœ€è¦è®¾ç½®çš„å€¼ï¼Œå¦‚æœè®¾ç½®ä¸º `1`ï¼Œåˆ™ä¼šå¼ºåˆ¶è®¾ç½®ä¸ºå•çº¿ç¨‹æ¨¡å¼ã€‚

- `upstream_base_url`: xyhelper çš„å…è´¹æ¥å£åœ°å€ï¼Œå¦‚ï¼š`https://demo.xyhelper.cn`ï¼Œæ³¨æ„ï¼šä¸è¦ä»¥ `/` ç»“å°¾ã€‚

- `upstream_api_prefix`: é»˜è®¤ä¸º""

- `backend_container_url`: ç”¨äºdalleæ¨¡å‹ç”Ÿæˆå›¾ç‰‡çš„æ—¶å€™å±•ç¤ºæ‰€ç”¨ï¼Œéœ€è¦è®¾ç½®ä¸ºä½¿ç”¨å¦‚ [ChatGPT-Next-Web](https://github.com/ChatGPTNextWebTeam/ChatGPT-Next-Web) çš„ç”¨æˆ·å¯ä»¥è®¿é—®åˆ°çš„æœ¬é¡¹ç›®åœ°å€ï¼Œå¦‚ï¼š`http://1.2.3.4:50011`ï¼ŒåŒåŸç¯å¢ƒå˜é‡ä¸­çš„ `UPLOAD_BASE_URL`

- `backend_container_api_prefix`: ç”¨äºè®¾ç½®æœ¬é¡¹ç›® `/v1/xxx` æ¥å£çš„å‰ç¼€ï¼Œå¦‚æœç•™ç©ºåˆ™ä¸å®˜æ–¹apiè°ƒç”¨æ¥å£ä¸€è‡´ã€‚è®¾ç½®ç¤ºä¾‹ï¼š`666 `

- `key_for_gpts_info`: å¡«å…¥refresh_tokenï¼ˆæ¯å¤©è‡ªåŠ¨è½¬æˆaccess_token æ¨èï¼‰æˆ–è€…access_token(ä¸æ¨è), ä»…è·å– GPTS ä¿¡æ¯çš„ access_tokenï¼Œéœ€è¦è¯¥ access_token èƒ½å¤Ÿè®¿é—®æ‰€æœ‰é…ç½®çš„ GPTSã€‚åç»­å‘é€æ¶ˆæ¯ä»éœ€è¦åœ¨è¯·æ±‚å¤´æºå¸¦è¯·æ±‚æ‰€ç”¨çš„ access_tokenï¼Œå¦‚æœæœªé…ç½®è¯¥é¡¹ï¼Œè¯·å°† `gpts.json` æ–‡ä»¶ä¿®æ”¹ä¸ºï¼š

```json
{}
```

- `gpt_4_s_new_name`ã€`gpt_4_mobile_new_name`ã€`gpt_3_5_new_name`: ç”¨äºè®¾ç½® gpt-4-sã€gpt-4-mobileã€gpt-3.5-turbo çš„æ¨¡å‹åç§°ä¸åˆ«åï¼Œå¦‚æœä¸éœ€è¦ä¿®æ”¹ï¼Œå¯ä»¥ä¿æŒä¸å˜ã€‚å¦‚æœéœ€è¦ä¿®æ”¹ï¼Œæ¯ä¸ªæ¨¡å‹å‡æ”¯æŒè®¾ç½®å¤šä¸ªåˆ«åï¼Œå¤šä¸ªåˆ«åä¹‹é—´ä»¥è‹±æ–‡é€—å·éš”å¼€ï¼Œä¾‹å¦‚ï¼š`gpt-4-s` çš„åˆ«åå¯ä»¥è®¾ç½®ä¸º `gpt-4-s,dall-e-3`ï¼Œè¿™æ ·åœ¨è°ƒç”¨çš„æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ `gpt-4-s` æˆ–è€… `dall-e-3` æ¥è°ƒç”¨è¯¥æ¨¡å‹ã€‚

- `need_delete_conversation_after_response`: ç”¨äºè®¾ç½®æ˜¯å¦åœ¨å“åº”ååˆ é™¤å¯¹è¯ï¼Œå¯é€‰å€¼ä¸ºï¼š`true`ã€`false`ï¼Œé»˜è®¤ä¸º `false`ï¼Œå¦‚æœè®¾ç½®ä¸º `true`ï¼Œåˆ™ä¼šåœ¨å“åº”ååˆ é™¤å¯¹è¯ï¼Œè¿™æ ·å¯ä»¥ä¿è¯åœ¨é¡µé¢ä¸Šä¸ä¼šç•™ä¸‹é€šè¿‡æœ¬é¡¹ç›®è°ƒç”¨çš„å¯¹è¯è®°å½•.

- `use_oaiusercontent_url`: æ˜¯å¦ä½¿ç”¨OpenAIå®˜æ–¹å›¾ç‰‡åŸŸåï¼Œå¯é€‰å€¼ä¸ºï¼š`true`ã€`false`ï¼Œé»˜è®¤ä¸º `false`ï¼Œå¦‚æœè®¾ç½®ä¸º `true`ï¼Œåˆ™ä¼šä½¿ç”¨OpenAIçš„å›¾ç‰‡åŸŸåï¼Œå¦åˆ™ä½¿ç”¨ `backend_container_url` å‚æ•°çš„å€¼ä½œä¸ºå›¾ç‰‡åŸŸåã€‚å¦‚æœè®¾ç½®ä¸º `true`ï¼Œåˆ™ `backend_container_url` å¯ä»¥ä¸å¡«ä¸”å›¾ç‰‡ä¸ä¼šä¸‹è½½åˆ°imageæ–‡ä»¶å¤¹ä¸­ã€‚

- `use_pandora_file_server`: æ˜¯å¦ä½¿ç”¨PandoraNextçš„æ–‡ä»¶æœåŠ¡å™¨ï¼Œå¯é€‰å€¼ä¸ºï¼š`true`ã€`false`ï¼Œé»˜è®¤ä¸º `true`ï¼Œå¦‚æœè®¾ç½®ä¸º `true`ï¼Œåˆ™ä¼šä»PandoraNextçš„æ–‡ä»¶æœåŠ¡å™¨ä¸‹è½½å›¾ç‰‡ç­‰æ–‡ä»¶ï¼Œå¦åˆ™å°†ç›´æ¥ä»openaiçš„æ–‡ä»¶æœåŠ¡å™¨ä¸‹è½½æ–‡ä»¶ã€‚

- `custom_arkose_url`: æ˜¯å¦éœ€è¦è‡ªå®šä¹‰Arkose Tokenè·å–åœ°å€ï¼Œå¯é€‰å€¼ä¸ºï¼š`true`ã€`false`ï¼Œé»˜è®¤ä¸º `false`ï¼Œå¦‚æœè®¾ç½®ä¸º `true`ï¼Œåˆ™ä¼šä½¿ç”¨ `arkose_urls` å‚æ•°çš„å€¼ä½œä¸ºArkose Tokenè·å–åœ°å€ï¼Œå¦åˆ™ä½¿ç”¨é»˜è®¤çš„PandoraNext Arkose Tokenè·å–åœ°å€ã€‚

- `arkose_urls`: Arkose Tokenè·å–åœ°å€ï¼Œå¦‚æœ `custom_arkose_url` ä¸º `false`ï¼Œåˆ™è¯¥å‚æ•°æ— æ•ˆï¼Œå¦‚æœ `custom_arkose_url` ä¸º `true`ï¼Œåˆ™è¯¥å‚æ•°å¿…å¡«ï¼Œä¸”éœ€è¦å¡«å†™ä¸ºå¯ä»¥è·å–Arkose Tokençš„åœ°å€åˆ—è¡¨ï¼Œä¾‹å¦‚ï¼š`https://arkose-proxy-1.pandoranext.com/<proxy-prefix>,https://arkose-proxy-2.pandoranext.com/<proxy-prefix>`ï¼Œæ”¯æŒåŒæ—¶è®¾ç½®å¤šä¸ªArkose Tokenè·å–åœ°å€ï¼Œä»å‰å¾€åè½®è¯¢è°ƒç”¨ï¼Œå¦‚æœç¬¬ä¸€ä¸ªè·å–å¤±è´¥åˆ™è‡ªåŠ¨ä»ç¬¬äºŒä¸ªè·å–ï¼Œä»¥æ­¤ç±»æ¨ã€‚

- `dalle_prompt_prefix`: è‡ªå®šä¹‰çš„DALLEæ¥å£promptå‰ç¼€ï¼Œå¯ä»¥å¼•å¯¼gptå®Œæˆç»˜å›¾ä»»åŠ¡ã€‚

PS. æ³¨æ„ï¼Œarkose_urlsä¸­çš„åœ°å€éœ€è¦æ”¯æŒPandoraNextçš„Arkose Tokenè·å–è·¯å¾„ä¸å‚æ•°ï¼Œå¹¶ä¸PandoraNextçš„Arkose Tokenè·å–æ¥å£çš„å“åº”æ ¼å¼ä¿æŒä¸€è‡´ã€‚

- `bot_mode`

    - `enabled`: ç”¨äºè®¾ç½®æ˜¯å¦å¼€å¯ Bot æ¨¡å¼ï¼Œå¯é€‰å€¼ä¸ºï¼š`true`ã€`false`ï¼Œé»˜è®¤ä¸º `false`ï¼Œå¼€å¯ Bot æ¨¡å¼åï¼Œå°†å¯ä»¥è‡ªå®šä¹‰è”ç½‘æ’ä»¶çš„å¼•å¼•ç”¨ã€ç»˜å›¾æ’ä»¶çš„markdownæ ¼å¼çš„å›¾ç‰‡ä»¥åŠæ’ä»¶æ‰§è¡Œè¿‡ç¨‹çš„è¾“å‡ºï¼Œä»…å»ºè®®åœ¨ QQã€å¾®ä¿¡æœºå™¨äººç­‰ Bot é¡¹ç›®ä¸­å¼€å¯ï¼Œç½‘é¡µåº”ç”¨è¯·ä¸è¦å¼€å¯ã€‚

    - `enabled_markdown_image_output`: ç”¨äºè®¾ç½®æ˜¯å¦å¼€å¯ Bot æ¨¡å¼ä¸‹ç»˜å›¾æ’ä»¶çš„markdownæ ¼å¼çš„å›¾ç‰‡è¾“å‡ºï¼Œå¯é€‰å€¼ä¸ºï¼š`true`ã€`false`ï¼Œé»˜è®¤ä¸º `false`ï¼Œå¼€å¯åï¼Œå°†ä¼šè¾“å‡ºmarkdownæ ¼å¼çš„å›¾ç‰‡è¾“å‡ºï¼Œä»…åœ¨ `bot_mode.enabled` ä¸º `true` æ—¶ç”Ÿæ•ˆã€‚

    - `enabled_plain_image_url_output`: ç”¨äºè®¾ç½®æ˜¯å¦å¼€å¯ Bot æ¨¡å¼ä¸‹ç»˜å›¾æ’ä»¶çš„çº¯å›¾ç‰‡é“¾æ¥ï¼ˆémarkdownæ ¼å¼ï¼‰è¾“å‡ºï¼Œå¯é€‰å€¼ä¸ºï¼š`true`ã€`false`ï¼Œé»˜è®¤ä¸º `false`ï¼Œå¼€å¯åï¼Œå°†ä¼šè¾“å‡ºçº¯å›¾ç‰‡é“¾æ¥è¾“å‡ºï¼Œä»…åœ¨ `bot_mode.enabled` ä¸º `true` æ—¶ç”Ÿæ•ˆã€‚æ³¨æ„ï¼šä¸`enabled_markdown_image_output` åŒæ—¶å¼€å¯æ—¶ï¼Œåªä¼šè¾“å‡ºé markdown æ ¼å¼çš„å›¾ç‰‡ã€‚

    - `enabled_bing_reference_output`: ç”¨äºè®¾ç½®æ˜¯å¦å¼€å¯ Bot æ¨¡å¼ä¸‹è”ç½‘æ’ä»¶çš„å¼•ç”¨è¾“å‡ºï¼Œå¯é€‰å€¼ä¸ºï¼š`true`ã€`false`ï¼Œé»˜è®¤ä¸º `false`ï¼Œå¼€å¯åï¼Œå°†ä¼šè¾“å‡ºè”ç½‘æ’ä»¶çš„å¼•ç”¨ï¼Œä»…åœ¨ `bot_mode.enabled` ä¸º `true` æ—¶ç”Ÿæ•ˆã€‚

    - `enabled_plugin_output`: ç”¨äºè®¾ç½®æ˜¯å¦å¼€å¯ Bot æ¨¡å¼ä¸‹æ’ä»¶æ‰§è¡Œè¿‡ç¨‹çš„è¾“å‡ºï¼Œå¯é€‰å€¼ä¸ºï¼š`true`ã€`false`ï¼Œé»˜è®¤ä¸º `false`ï¼Œå¼€å¯åï¼Œå°†ä¼šè¾“å‡ºæ’ä»¶æ‰§è¡Œè¿‡ç¨‹çš„è¾“å‡ºï¼Œä»…åœ¨ `bot_mode.enabled` ä¸º `true` æ—¶ç”Ÿæ•ˆã€‚

- `refresh_ToAccess`

    - `stream_sleep_time`:ç”¨äºè®¾ç½®æµå¼ä¼ è¾“æ—¶ï¼Œæ¯æ¡è¾“å‡ºçš„æ•°æ®é—´éš”æ—¶é—´ï¼Œå•ä½ç§’ã€‚
  
    - `enableOai`:ç”¨äºè®¾ç½®æ˜¯å¦ä½¿ç”¨å®˜ç½‘é€šè¿‡refresh_tokenåˆ·æ–°access_tokenï¼Œä»…åœ¨ `enableOai` ä¸º `true` æ—¶ç”Ÿæ•ˆã€‚
      
    - `xyhelper_refreshToAccess_Url`:ç”¨äºè®¾ç½®ä½¿ç”¨xyhelperæ¥è¿›è¡Œä½¿ç”¨refresh_tokenåˆ·æ–°access_token,enableOaiä¸ºfalseçš„æ—¶å€™å¿…å¡«
        - é»˜è®¤ä¸º"https://demo.xyhelper.cn/applelogin"

- `redis`

    - `host`: Redisçš„ipåœ°å€ï¼Œä¾‹å¦‚ï¼š1.2.3.4ï¼Œé»˜è®¤æ˜¯ redis å®¹å™¨

    - `port`: Redisçš„ç«¯å£ï¼Œé»˜è®¤ï¼š6379ï¼Œå¦‚æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œä½ å¯ä»¥å°†æ­¤å€¼è®¾ç½®ä¸ºå…¶ä»–ç«¯å£

    - `password`: Redisçš„å¯†ç ï¼Œé»˜è®¤ä¸ºç©ºï¼Œå¦‚æœä½ çš„RedisæœåŠ¡è®¾ç½®äº†å¯†ç ï¼Œè¯·å°†å…¶è®¾ç½®ä¸ºä½ çš„å¯†ç 

    - `db`: Redisçš„æ•°æ®åº“ï¼Œé»˜è®¤ï¼š0ï¼Œå¦‚æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œä½ å¯ä»¥å°†æ­¤å€¼è®¾ç½®ä¸ºå…¶ä»–æ•°æ®åº“

## GPTSé…ç½®è¯´æ˜

å¦‚æœéœ€è¦ä½¿ç”¨ GPTSï¼Œéœ€è¦ä¿®æ”¹ `gpts.json` æ–‡ä»¶ï¼Œå…¶ä¸­æ¯ä¸ªå¯¹è±¡çš„keyå³ä¸ºè°ƒç”¨å¯¹åº” GPTS çš„æ—¶å€™ä½¿ç”¨çš„æ¨¡å‹åç§°ï¼Œè€Œ `id` åˆ™ä¸ºå¯¹åº”çš„æ¨¡å‹idï¼Œè¯¥ `id` å¯¹åº”æ¯ä¸ª GPTS çš„é“¾æ¥çš„åç¼€ã€‚é…ç½®å¤šä¸ªGPTSçš„æ—¶å€™ç”¨é€—å·éš”å¼€ã€‚

ä¾‹å¦‚ï¼šPandoraNextçš„å®˜æ–¹ GPTS çš„é“¾æ¥ä¸ºï¼š`https://chat.oaifree.com/g/g-CFsXuTRfy-pandoranextzhu-shou`ï¼Œåˆ™è¯¥æ¨¡å‹çš„ `id` çš„å€¼åº”ä¸º `g-CFsXuTRfy-pandoranextzhu-shou`ï¼Œè€Œæ¨¡å‹åå¯ä»¥è‡ªå®šä¹‰ã€‚

ç¤ºä¾‹ï¼š

```json
{
    "gpt-4-classic": {
        "id":"g-YyyyMT9XH-chatgpt-classic"
    },
    "pandoraNext":{
        "id":"g-CFsXuTRfy-pandoranextzhu-shou"
    }
}
```

æ³¨æ„ï¼šä½¿ç”¨è¯¥é…ç½®çš„æ—¶å€™éœ€è¦ä¿è¯æ­£ç¡®å¡«å†™ `docker-compose.yml` çš„ç¯å¢ƒå˜é‡ `KEY_FOR_GPTS_INFO`ï¼ŒåŒæ—¶è¯¥å˜é‡è®¾ç½®çš„ `key` å…è®¸è®¿é—®æ‰€æœ‰é…ç½®çš„ GPTSã€‚

## ç»˜å›¾æ¥å£ä½¿ç”¨è¯´æ˜

æ¥å£URIï¼š`/v1/images/generations`

è¯·æ±‚æ–¹å¼ï¼š`POST`

è¯·æ±‚å¤´ï¼šæ­£å¸¸æºå¸¦ `Authorization` å’Œ `Content-Type` å³å¯ï¼Œ`Authorization` çš„å€¼ä¸º `Bearer <refresh_token>`ï¼Œ`Content-Type` çš„å€¼ä¸º `application/json`

è¯·æ±‚ä½“æ ¼å¼ç¤ºä¾‹ï¼š

```json
{
    "model": "gpt-4-s",
    "prompt": "A cute baby sea otter"
}
```

è¯·æ±‚ä½“å‚æ•°è¯´æ˜ï¼š

- modelï¼šæ¨¡å‹åç§°ï¼Œéœ€è¦æ”¯æŒç»˜å›¾åŠŸèƒ½ï¼Œå¦åˆ™ç»˜å›¾ç»“æœå°†ä¸ºç©º

- promptï¼šç»˜å›¾çš„ Prompt

å“åº”ä½“æ ¼å¼ç¤ºä¾‹ï¼š

```json
{
    "created": 1702788293,
    "data": [
        {
            "url": "http://<upload å®¹å™¨å…¬ç½‘ip>:50012/images/image_20231217044452.png"
        }
    ],
    "reply": "\n```\n{\"size\":\"1024x1024\",\"prompt\":\"A cute baby sea otter floating on its back in calm, clear waters. The otter has soft, fluffy brown fur, and its small, round eyes are shining brightly. It's holding a small starfish in its tiny paws. The sun is setting in the background, casting a golden glow over the scene. The water reflects the colors of the sunset, with gentle ripples around the otter. There are a few seagulls flying in the distance under the pastel-colored sky.\"}Here is the image of a cute baby sea otter floating on its back."
}
```

## æ–‡ä»¶è¯†åˆ«æ¥å£ä½¿ç”¨è¯´æ˜

è°ƒç”¨æ–¹å¼åŒå®˜æ–¹ `gpt-4-vision-preview` API 

æ¥å£URIï¼š`/v1/chat/completions`

è¯·æ±‚æ–¹å¼ï¼š`POST`

è¯·æ±‚ä½“æ ¼å¼ç¤ºä¾‹ï¼ˆä»¥ url å½¢å¼ä¼ å…¥æ–‡ä»¶ï¼‰ï¼š

```json
{
    "messages": [
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": "è¿™ä¸ªpdfé‡Œå†™äº†ä»€ä¹ˆï¼Œç”¨ä¸­æ–‡å›å¤"
                },
                {
                    "type": "image_url",
                    "image_url": {
                        "url": "https://bitcoin.org/bitcoin.pdf"
                    }
                }
            ]
        }
    ],
    "stream": false,
    "model": "gpt-4",
    "temperature": 0.5,
    "presence_penalty": 0,
    "frequency_penalty": 0,
    "top_p": 1
}
```

è¯·æ±‚ä½“ç¤ºä¾‹ï¼ˆä»¥ Base64 å½¢å¼ä¼ å…¥æ–‡ä»¶ï¼‰ï¼š
```json
{
    "messages": [
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": "è¿™å¼ å›¾é‡Œç”»äº†ä»€ä¹ˆ"
                },
                {
                    "type": "image_url",
                    "image_url": {
                        "url": "data:<mime>;base64,<æ–‡ä»¶çš„Base64>"
                    }
                }
            ]
        }
    ],
    "stream": false,
    "model": "gpt-4-s",
    "temperature": 0.5,
    "presence_penalty": 0,
    "frequency_penalty": 0,
    "top_p": 1
}
```

`MIME` æ”¯æŒåˆ—è¡¨ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼ˆå¦‚æœéåˆ—è¡¨ä¸­çš„ç±»å‹ä¼šç›´æ¥è½¬æˆçº¯æ–‡æœ¬txtæ‰§è¡Œä¸Šä¼ æ“ä½œï¼‰ï¼š

```
"image/jpeg", "image/webp", "image/png", "image/gif","text/x-php", "application/msword", "text/x-c", "text/html",  "application/vnd.openxmlformats-officedocument.wordprocessingml.document", "application/json", "text/javascript", "application/pdf", "text/x-java", "text/x-tex", "text/x-typescript", "text/x-sh", "text/x-csharp", "application/vnd.openxmlformats-officedocument.presentationml.presentation", "text/x-c++", "application/x-latext", "text/markdown", "text/plain", "text/x-ruby", "text/x-script.python"
```

å“åº”ä½“æ ¼å¼ç¤ºä¾‹ï¼š

```json
{
    "choices": [
        {
            "finish_reason": "stop",
            "index": 0,
            "message": {
                "content": "\n```\nopen_url(\"file-xxxxxxx\")\n```\nè¿™ä¸ªPDFæ–‡ä»¶æ˜¯å…³äºæ¯”ç‰¹å¸çš„åŸå§‹è®ºæ–‡ï¼Œåä¸ºã€Šæ¯”ç‰¹å¸ï¼šä¸€ç§ç‚¹å¯¹ç‚¹çš„ç”µå­ç°é‡‘ç³»ç»Ÿã€‹ï¼Œä½œè€…æ˜¯ä¸­æœ¬èªã€‚è¿™ç¯‡è®ºæ–‡ä»‹ç»äº†ä¸€ç§å…¨æ–°çš„æ•°å­—è´§å¸ç³»ç»Ÿï¼Œå®ƒä¸ä¾èµ–äºä»»ä½•ä¸­å¿ƒåŒ–çš„é‡‘èæœºæ„ã€‚æ¯”ç‰¹å¸é€šè¿‡ä¸€ç§å»ä¸­å¿ƒåŒ–çš„ç½‘ç»œå’Œä¸€ç§ç§°ä¸ºåŒºå—é“¾çš„æŠ€æœ¯æ¥ç»´æŒäº¤æ˜“çš„å®‰å…¨å’Œå®Œæ•´æ€§ã€‚è¿™ä¸ªç³»ç»Ÿä½¿ç”¨æ•°å­—ç­¾åæ¥ç¡®è®¤äº¤æ˜“ï¼Œå¹¶é€šè¿‡ä¸€ç§è¢«ç§°ä¸ºå·¥ä½œé‡è¯æ˜çš„æœºåˆ¶æ¥é˜²æ­¢åŒé‡æ”¯ä»˜ã€‚æ•´ä¸ªç³»ç»Ÿæ—¨åœ¨åˆ›å»ºä¸€ä¸ªå®‰å…¨ã€å»ä¸­å¿ƒåŒ–ã€å¯¹ç”¨æˆ·å‹å¥½çš„æ•°å­—è´§å¸ã€‚",
                "role": "assistant"
            }
        }
    ],
    "created": 1703063445,
    "id": "chatcmpl-xxxxxxxx",
    "model": "gpt-4",
    "object": "chat.completion",
    "system_fingerprint": null,
    "usage": {
        "completion_tokens": 0,
        "prompt_tokens": 0,
        "total_tokens": 0
    }
}
```

## ç¤ºä¾‹

ä»¥ChatGPT-Next-Webé¡¹ç›®çš„docker-composeéƒ¨ç½²ä¸ºä¾‹ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªç®€å•çš„éƒ¨ç½²é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š

```
version: '3'
services:
  chatgpt-next-web:
    image: yidadaa/chatgpt-next-web
    ports:
      - "50013:3000"
    environment:
      - OPENAI_API_KEY=<æ­£ç¡®çš„refresh_token>
      - BASE_URL=<backend-to-apiå®¹å™¨åœ°å€>
      - CUSTOM_MODELS=+gpt-4-s,+gpt-4-mobile,+<gpts.json ä¸­çš„æ¨¡å‹å>

```

## åŠŸèƒ½æ¼”ç¤º
<details>

### è”ç½‘

![api-1](https://github.com/Ink-Osier/PandoraToV1Api/assets/133617214/e9a71acf-4804-4280-a774-82e9c0f009a4)

### ä»£ç è§£é‡Šå™¨

![api-2](https://github.com/Ink-Osier/PandoraToV1Api/assets/133617214/37c0381f-a70a-42bb-83f1-1491053240b7)

### ç»˜å›¾

![api-3](https://github.com/Ink-Osier/PandoraToV1Api/assets/133617214/8eea9436-12ee-46b1-86c1-67e7e97da83a)

### GPT-4-Mobile

![api-4](https://github.com/Ink-Osier/PandoraToV1Api/assets/133617214/2eb4fd4f-7c66-4a1f-a54a-3c280a36e509)

### GPTS

![api-5](https://github.com/Ink-Osier/PandoraToV1Api/assets/133617214/299df56a-d245-4920-8892-94e1a9cc644a)

### Bot æ¨¡å¼

#### å¼€å¯ Bot æ¨¡å¼

![image](https://github.com/Ink-Osier/PandoraToV1Api/assets/133617214/9c5fd974-58f2-4b96-839d-aef10f7a1cfc)

#### å…³é—­ Bot æ¨¡å¼

![image](https://github.com/Ink-Osier/PandoraToV1Api/assets/133617214/c1d3457f-b912-4572-b4e0-1118b48102d8)

</details>

## å¼ºè°ƒ
> [!caution]
>
> * æœ¬é¡¹ç›®åªæä¾›è½¬å‘æ¥å£ğŸ¥°
> * å¼€æºé¡¹ç›®ä¸æ˜“ï¼Œè¯·ç‚¹ä¸ªæ˜Ÿæ˜Ÿå§ï¼ï¼ï¼

### æ–°å¢ç¾¤èŠï¼Œç‚¹äº†â­ï¸å¯ä»¥è¿›ç¾¤è®¨è®ºéƒ¨ç½²ï¼Œæˆ‘æŠŠä½ ä»¬æ‹‰è¿›ç¾¤ï¼Œæ— å¹¿ï¼Œå¹¿å­è¸¢æ‰
<img src="https://github.com/Yanyutin753/PandoraNext-TokensTool/assets/132346501/6544e8ed-6673-48f9-95a6-c13255acbab1" width="300" height="300">

### è¯·ç»™æˆ‘ä¸€ä¸ªå…è´¹çš„â­å§ï¼ï¼ï¼

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=Yanyutin753/xyhelperV1Api_refresh&type=Date)](https://star-history.com/#Yanyutin753/xyhelperV1Api_refresh&Date)
